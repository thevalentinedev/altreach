"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/twitter/generate-comments/route";
exports.ids = ["app/api/twitter/generate-comments/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute&page=%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute.ts&appDir=%2Fhome%2Fvalentinedev%2FDownloads%2Faltreach-session%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fvalentinedev%2FDownloads%2Faltreach-session&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute&page=%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute.ts&appDir=%2Fhome%2Fvalentinedev%2FDownloads%2Faltreach-session%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fvalentinedev%2FDownloads%2Faltreach-session&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_valentinedev_Downloads_altreach_session_app_api_twitter_generate_comments_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/twitter/generate-comments/route.ts */ \"(rsc)/./app/api/twitter/generate-comments/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/twitter/generate-comments/route\",\n        pathname: \"/api/twitter/generate-comments\",\n        filename: \"route\",\n        bundlePath: \"app/api/twitter/generate-comments/route\"\n    },\n    resolvedPagePath: \"/home/valentinedev/Downloads/altreach-session/app/api/twitter/generate-comments/route.ts\",\n    nextConfigOutput,\n    userland: _home_valentinedev_Downloads_altreach_session_app_api_twitter_generate_comments_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/twitter/generate-comments/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0d2l0dGVyJTJGZ2VuZXJhdGUtY29tbWVudHMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnR3aXR0ZXIlMkZnZW5lcmF0ZS1jb21tZW50cyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnR3aXR0ZXIlMkZnZW5lcmF0ZS1jb21tZW50cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGdmFsZW50aW5lZGV2JTJGRG93bmxvYWRzJTJGYWx0cmVhY2gtc2Vzc2lvbiUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGaG9tZSUyRnZhbGVudGluZWRldiUyRkRvd25sb2FkcyUyRmFsdHJlYWNoLXNlc3Npb24maXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3dDO0FBQ3JIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8/MTZmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS92YWxlbnRpbmVkZXYvRG93bmxvYWRzL2FsdHJlYWNoLXNlc3Npb24vYXBwL2FwaS90d2l0dGVyL2dlbmVyYXRlLWNvbW1lbnRzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90d2l0dGVyL2dlbmVyYXRlLWNvbW1lbnRzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdHdpdHRlci9nZW5lcmF0ZS1jb21tZW50c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdHdpdHRlci9nZW5lcmF0ZS1jb21tZW50cy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL3ZhbGVudGluZWRldi9Eb3dubG9hZHMvYWx0cmVhY2gtc2Vzc2lvbi9hcHAvYXBpL3R3aXR0ZXIvZ2VuZXJhdGUtY29tbWVudHMvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3R3aXR0ZXIvZ2VuZXJhdGUtY29tbWVudHMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute&page=%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute.ts&appDir=%2Fhome%2Fvalentinedev%2FDownloads%2Faltreach-session%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fvalentinedev%2FDownloads%2Faltreach-session&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/twitter/generate-comments/route.ts":
/*!****************************************************!*\
  !*** ./app/api/twitter/generate-comments/route.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n\n// Initialize OpenAI client\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\n// In-memory rate limiter\nconst rateLimitMap = new Map();\nconst RATE_LIMIT_WINDOW = 3000 // 3 seconds in milliseconds\n;\n// Helper function to get client identifier (IP address)\nfunction getClientId(request) {\n    const forwarded = request.headers.get(\"x-forwarded-for\");\n    const realIp = request.headers.get(\"x-real-ip\");\n    const cfConnectingIp = request.headers.get(\"cf-connecting-ip\");\n    const clientIp = forwarded?.split(\",\")[0] || realIp || cfConnectingIp || \"unknown\";\n    return clientIp.trim();\n}\n// Rate limiting function\nfunction checkRateLimit(clientId) {\n    const now = Date.now();\n    const lastRequest = rateLimitMap.get(clientId);\n    if (lastRequest) {\n        const timeSinceLastRequest = now - lastRequest;\n        if (timeSinceLastRequest < RATE_LIMIT_WINDOW) {\n            const timeRemaining = RATE_LIMIT_WINDOW - timeSinceLastRequest;\n            return {\n                allowed: false,\n                timeRemaining\n            };\n        }\n    }\n    rateLimitMap.set(clientId, now);\n    // Clean up old entries to prevent memory leaks\n    for (const [id, timestamp] of rateLimitMap.entries()){\n        if (now - timestamp > 60000) {\n            rateLimitMap.delete(id);\n        }\n    }\n    return {\n        allowed: true\n    };\n}\n// Helper function to determine the appropriate model based on content complexity\nfunction determineOptimalModel(text, isComplexRequest) {\n    // Default to GPT-3.5-turbo for most requests\n    let model = \"gpt-3.5-turbo-1106\";\n    // Check for complexity indicators\n    const isComplex = isComplexRequest || text.length > 500 || text.includes(\"code\") || text.includes(\"technical\") || /\\b(analyze|analyse|explain|compare|contrast)\\b/i.test(text);\n    if (isComplex) {\n        model = \"gpt-4o\" // Use more capable model for complex requests\n        ;\n        console.log(\"Using GPT-4o for complex request\");\n    } else {\n        console.log(\"Using GPT-3.5-turbo for standard request\");\n    }\n    return model;\n}\nasync function POST(request) {\n    try {\n        // Rate limiting check\n        const clientId = getClientId(request);\n        const rateLimitResult = checkRateLimit(clientId);\n        if (!rateLimitResult.allowed) {\n            const secondsRemaining = Math.ceil((rateLimitResult.timeRemaining || 0) / 1000);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Please wait a moment before generating another comment. Try again in ${secondsRemaining} second${secondsRemaining !== 1 ? \"s\" : \"\"}.`,\n                rateLimited: true,\n                retryAfter: secondsRemaining\n            }, {\n                status: 429,\n                headers: {\n                    \"Retry-After\": secondsRemaining.toString()\n                }\n            });\n        }\n        const requestData = await request.json();\n        const { tweetContent, tone, length, useEmoji, variations, instructions } = requestData;\n        if (!tweetContent || !tweetContent.text) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Tweet content is required\"\n            }, {\n                status: 400\n            });\n        }\n        if (!tone) {\n        // Tone can be empty now, handled in prompt\n        }\n        // Validate variations\n        const numVariations = variations || 3;\n        if (numVariations < 1 || numVariations > 5) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Number of variations must be between 1 and 5\"\n            }, {\n                status: 400\n            });\n        }\n        try {\n            // Build the system prompt\n            const systemPrompt = `You are a social media copywriter specializing in Twitter/X replies. \nGiven a tweet, first analyze its content to determine the most appropriate tone for a reply, then generate ${numVariations} comment variation${numVariations > 1 ? \"s\" : \"\"} using that tone (unless a specific tone is requested).\n\n${tone ? `The requested tone is: ${tone}` : \"Determine the optimal tone based on the tweet content.\"}\n\nGuidelines:\n- ${tone ? `Use the requested ${tone} tone` : \"First determine the optimal tone, then use it consistently\"}\n- Keep replies ${length === \"shorter\" ? \"concise (under 140 characters)\" : \"more detailed (140-280 characters)\"}\n- ${useEmoji ? \"Include relevant emojis naturally\" : \"Do not use emojis\"}\n- Make each variation distinct and engaging\n- Focus on driving conversation and engagement\n- Sound authentic and human, not generic or AI-generated\n- Avoid generic phrases like \"Great post!\" or \"Thanks for sharing!\"\n- Respond directly to the content of the tweet\n\n${instructions ? `Additional instructions: ${instructions}` : \"\"}\n\nReturn your response as a JSON object with the following structure:\n{\n  \"detectedTone\": \"brief description of the detected tone (only if no tone was specified)\",\n  \"comments\": [\"First comment variation\", \"Second comment variation\", \"Third comment variation\"]\n}\n`;\n            // Create the user prompt with the tweet content\n            const userPrompt = `Tweet${tweetContent.author ? ` by ${tweetContent.author}` : \"\"}:\n\"${tweetContent.text.substring(0, 280)}${tweetContent.text.length > 280 ? \"...\" : \"\"}\"\n\n${tone ? `Generate ${numVariations} ${tone} reply variation${numVariations > 1 ? \"s\" : \"\"}.` : `Determine the best tone for replying, then generate ${numVariations} reply variation${numVariations > 1 ? \"s\" : \"\"} using that tone.`}`;\n            // Determine if this is a complex request\n            const isComplexRequest = !!instructions && (instructions.length > 100 || instructions.includes(\"technical\") || instructions.includes(\"analyze\"));\n            // Determine the optimal model\n            const modelToUse = determineOptimalModel(tweetContent.text, isComplexRequest);\n            // Call OpenAI API\n            const response = await openai.chat.completions.create({\n                model: modelToUse,\n                messages: [\n                    {\n                        role: \"system\",\n                        content: systemPrompt\n                    },\n                    {\n                        role: \"user\",\n                        content: userPrompt\n                    }\n                ],\n                temperature: 0.8,\n                response_format: {\n                    type: \"json_object\"\n                },\n                max_tokens: 1000\n            });\n            const content = response.choices[0].message.content;\n            if (!content) {\n                throw new Error(\"No content returned from OpenAI\");\n            }\n            // Parse the JSON response\n            let comments = [];\n            let detectedTone = null;\n            try {\n                const parsedResponse = JSON.parse(content);\n                // Extract detected tone if available\n                if (parsedResponse.detectedTone && !tone) {\n                    detectedTone = parsedResponse.detectedTone;\n                }\n                // Handle different possible JSON structures\n                if (Array.isArray(parsedResponse)) {\n                    comments = parsedResponse;\n                } else if (parsedResponse.comments && Array.isArray(parsedResponse.comments)) {\n                    comments = parsedResponse.comments;\n                } else if (parsedResponse.replies && Array.isArray(parsedResponse.replies)) {\n                    comments = parsedResponse.replies;\n                } else if (parsedResponse.variations && Array.isArray(parsedResponse.variations)) {\n                    comments = parsedResponse.variations;\n                } else {\n                    // Try to extract any array property\n                    const arrayProps = Object.values(parsedResponse).filter((val)=>Array.isArray(val));\n                    if (arrayProps.length > 0 && Array.isArray(arrayProps[0])) {\n                        comments = arrayProps[0];\n                    }\n                }\n            } catch (parseError) {\n                console.error(\"Error parsing OpenAI response:\", parseError);\n                // Fallback: try to extract an array from the content\n                const arrayMatch = content.match(/\\[(.*)\\]/s);\n                if (arrayMatch && arrayMatch[1]) {\n                    try {\n                        comments = JSON.parse(`[${arrayMatch[1]}]`);\n                    } catch  {\n                        // If all parsing fails, split by newlines and clean up\n                        comments = content.split(\"\\n\").filter((line)=>line.trim().startsWith('\"') || line.trim().startsWith(\"'\")).map((line)=>line.trim().replace(/^[\"']|[\"'],?$/g, \"\"));\n                    }\n                }\n            }\n            // Ensure we have at least one comment\n            if (!comments.length) {\n                throw new Error(\"Failed to generate comments\");\n            }\n            // Format the comments\n            const formattedComments = comments.map((text, index)=>({\n                    text: text.trim().replace(/^[\"']|[\"']$/g, \"\"),\n                    isRecommended: index === 0\n                }));\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                comments: formattedComments,\n                tweetContext: tweetContent.text,\n                tone: detectedTone || tone,\n                detectedTone: detectedTone,\n                metadata: {\n                    length,\n                    useEmoji,\n                    variations: numVariations,\n                    hasInstructions: !!instructions\n                }\n            });\n        } catch (openaiError) {\n            console.error(\"OpenAI API error:\", openaiError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to generate comments. Our AI service is experiencing issues. Please try again shortly.\"\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"Error generating comments:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Comment generation failed. Please try again.\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3R3aXR0ZXIvZ2VuZXJhdGUtY29tbWVudHMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTBDO0FBQ2Y7QUFFM0IsMkJBQTJCO0FBQzNCLE1BQU1FLFNBQVMsSUFBSUQsOENBQU1BLENBQUM7SUFDeEJFLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztBQUNwQztBQUVBLHlCQUF5QjtBQUN6QixNQUFNQyxlQUFlLElBQUlDO0FBQ3pCLE1BQU1DLG9CQUFvQixLQUFLLDRCQUE0Qjs7QUFFM0Qsd0RBQXdEO0FBQ3hELFNBQVNDLFlBQVlDLE9BQWdCO0lBQ25DLE1BQU1DLFlBQVlELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ3RDLE1BQU1DLFNBQVNKLFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO0lBQ25DLE1BQU1FLGlCQUFpQkwsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7SUFDM0MsTUFBTUcsV0FBV0wsV0FBV00sTUFBTSxJQUFJLENBQUMsRUFBRSxJQUFJSCxVQUFVQyxrQkFBa0I7SUFDekUsT0FBT0MsU0FBU0UsSUFBSTtBQUN0QjtBQUVBLHlCQUF5QjtBQUN6QixTQUFTQyxlQUFlQyxRQUFnQjtJQUN0QyxNQUFNQyxNQUFNQyxLQUFLRCxHQUFHO0lBQ3BCLE1BQU1FLGNBQWNqQixhQUFhTyxHQUFHLENBQUNPO0lBRXJDLElBQUlHLGFBQWE7UUFDZixNQUFNQyx1QkFBdUJILE1BQU1FO1FBQ25DLElBQUlDLHVCQUF1QmhCLG1CQUFtQjtZQUM1QyxNQUFNaUIsZ0JBQWdCakIsb0JBQW9CZ0I7WUFDMUMsT0FBTztnQkFBRUUsU0FBUztnQkFBT0Q7WUFBYztRQUN6QztJQUNGO0lBRUFuQixhQUFhcUIsR0FBRyxDQUFDUCxVQUFVQztJQUUzQiwrQ0FBK0M7SUFDL0MsS0FBSyxNQUFNLENBQUNPLElBQUlDLFVBQVUsSUFBSXZCLGFBQWF3QixPQUFPLEdBQUk7UUFDcEQsSUFBSVQsTUFBTVEsWUFBWSxPQUFP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QUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktdjAtcHJvamVjdC8uL2FwcC9hcGkvdHdpdHRlci9nZW5lcmF0ZS1jb21tZW50cy9yb3V0ZS50cz81ZDE2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiXG5pbXBvcnQgT3BlbkFJIGZyb20gXCJvcGVuYWlcIlxuXG4vLyBJbml0aWFsaXplIE9wZW5BSSBjbGllbnRcbmNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxufSlcblxuLy8gSW4tbWVtb3J5IHJhdGUgbGltaXRlclxuY29uc3QgcmF0ZUxpbWl0TWFwID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKVxuY29uc3QgUkFURV9MSU1JVF9XSU5ET1cgPSAzMDAwIC8vIDMgc2Vjb25kcyBpbiBtaWxsaXNlY29uZHNcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBjbGllbnQgaWRlbnRpZmllciAoSVAgYWRkcmVzcylcbmZ1bmN0aW9uIGdldENsaWVudElkKHJlcXVlc3Q6IFJlcXVlc3QpOiBzdHJpbmcge1xuICBjb25zdCBmb3J3YXJkZWQgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC1mb3J3YXJkZWQtZm9yXCIpXG4gIGNvbnN0IHJlYWxJcCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ4LXJlYWwtaXBcIilcbiAgY29uc3QgY2ZDb25uZWN0aW5nSXAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwiY2YtY29ubmVjdGluZy1pcFwiKVxuICBjb25zdCBjbGllbnRJcCA9IGZvcndhcmRlZD8uc3BsaXQoXCIsXCIpWzBdIHx8IHJlYWxJcCB8fCBjZkNvbm5lY3RpbmdJcCB8fCBcInVua25vd25cIlxuICByZXR1cm4gY2xpZW50SXAudHJpbSgpXG59XG5cbi8vIFJhdGUgbGltaXRpbmcgZnVuY3Rpb25cbmZ1bmN0aW9uIGNoZWNrUmF0ZUxpbWl0KGNsaWVudElkOiBzdHJpbmcpOiB7IGFsbG93ZWQ6IGJvb2xlYW47IHRpbWVSZW1haW5pbmc/OiBudW1iZXIgfSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgY29uc3QgbGFzdFJlcXVlc3QgPSByYXRlTGltaXRNYXAuZ2V0KGNsaWVudElkKVxuXG4gIGlmIChsYXN0UmVxdWVzdCkge1xuICAgIGNvbnN0IHRpbWVTaW5jZUxhc3RSZXF1ZXN0ID0gbm93IC0gbGFzdFJlcXVlc3RcbiAgICBpZiAodGltZVNpbmNlTGFzdFJlcXVlc3QgPCBSQVRFX0xJTUlUX1dJTkRPVykge1xuICAgICAgY29uc3QgdGltZVJlbWFpbmluZyA9IFJBVEVfTElNSVRfV0lORE9XIC0gdGltZVNpbmNlTGFzdFJlcXVlc3RcbiAgICAgIHJldHVybiB7IGFsbG93ZWQ6IGZhbHNlLCB0aW1lUmVtYWluaW5nIH1cbiAgICB9XG4gIH1cblxuICByYXRlTGltaXRNYXAuc2V0KGNsaWVudElkLCBub3cpXG5cbiAgLy8gQ2xlYW4gdXAgb2xkIGVudHJpZXMgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAgZm9yIChjb25zdCBbaWQsIHRpbWVzdGFtcF0gb2YgcmF0ZUxpbWl0TWFwLmVudHJpZXMoKSkge1xuICAgIGlmIChub3cgLSB0aW1lc3RhbXAgPiA2MDAwMCkge1xuICAgICAgcmF0ZUxpbWl0TWFwLmRlbGV0ZShpZClcbiAgICB9XG4gIH1cblxuICByZXR1cm4geyBhbGxvd2VkOiB0cnVlIH1cbn1cblxuaW50ZXJmYWNlIEdlbmVyYXRlQ29tbWVudHNSZXF1ZXN0IHtcbiAgdHdlZXRDb250ZW50OiB7XG4gICAgdGV4dDogc3RyaW5nXG4gICAgYXV0aG9yPzogc3RyaW5nIHwgbnVsbFxuICAgIHVzZXJuYW1lPzogc3RyaW5nIHwgbnVsbFxuICB9XG4gIHRvbmU6IHN0cmluZ1xuICBsZW5ndGg6IFwic2hvcnRlclwiIHwgXCJsb25nZXJcIlxuICB1c2VFbW9qaTogYm9vbGVhblxuICB2YXJpYXRpb25zOiBudW1iZXJcbiAgaW5zdHJ1Y3Rpb25zPzogc3RyaW5nXG59XG5cbmludGVyZmFjZSBHZW5lcmF0ZWRDb21tZW50IHtcbiAgdGV4dDogc3RyaW5nXG4gIGlzUmVjb21tZW5kZWQ6IGJvb2xlYW5cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGRldGVybWluZSB0aGUgYXBwcm9wcmlhdGUgbW9kZWwgYmFzZWQgb24gY29udGVudCBjb21wbGV4aXR5XG5mdW5jdGlvbiBkZXRlcm1pbmVPcHRpbWFsTW9kZWwodGV4dDogc3RyaW5nLCBpc0NvbXBsZXhSZXF1ZXN0OiBib29sZWFuKTogc3RyaW5nIHtcbiAgLy8gRGVmYXVsdCB0byBHUFQtMy41LXR1cmJvIGZvciBtb3N0IHJlcXVlc3RzXG4gIGxldCBtb2RlbCA9IFwiZ3B0LTMuNS10dXJiby0xMTA2XCJcblxuICAvLyBDaGVjayBmb3IgY29tcGxleGl0eSBpbmRpY2F0b3JzXG4gIGNvbnN0IGlzQ29tcGxleCA9XG4gICAgaXNDb21wbGV4UmVxdWVzdCB8fFxuICAgIHRleHQubGVuZ3RoID4gNTAwIHx8XG4gICAgdGV4dC5pbmNsdWRlcyhcImNvZGVcIikgfHxcbiAgICB0ZXh0LmluY2x1ZGVzKFwidGVjaG5pY2FsXCIpIHx8XG4gICAgL1xcYihhbmFseXplfGFuYWx5c2V8ZXhwbGFpbnxjb21wYXJlfGNvbnRyYXN0KVxcYi9pLnRlc3QodGV4dClcblxuICBpZiAoaXNDb21wbGV4KSB7XG4gICAgbW9kZWwgPSBcImdwdC00b1wiIC8vIFVzZSBtb3JlIGNhcGFibGUgbW9kZWwgZm9yIGNvbXBsZXggcmVxdWVzdHNcbiAgICBjb25zb2xlLmxvZyhcIlVzaW5nIEdQVC00byBmb3IgY29tcGxleCByZXF1ZXN0XCIpXG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coXCJVc2luZyBHUFQtMy41LXR1cmJvIGZvciBzdGFuZGFyZCByZXF1ZXN0XCIpXG4gIH1cblxuICByZXR1cm4gbW9kZWxcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIFJhdGUgbGltaXRpbmcgY2hlY2tcbiAgICBjb25zdCBjbGllbnRJZCA9IGdldENsaWVudElkKHJlcXVlc3QpXG4gICAgY29uc3QgcmF0ZUxpbWl0UmVzdWx0ID0gY2hlY2tSYXRlTGltaXQoY2xpZW50SWQpXG5cbiAgICBpZiAoIXJhdGVMaW1pdFJlc3VsdC5hbGxvd2VkKSB7XG4gICAgICBjb25zdCBzZWNvbmRzUmVtYWluaW5nID0gTWF0aC5jZWlsKChyYXRlTGltaXRSZXN1bHQudGltZVJlbWFpbmluZyB8fCAwKSAvIDEwMDApXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHtcbiAgICAgICAgICBlcnJvcjogYFBsZWFzZSB3YWl0IGEgbW9tZW50IGJlZm9yZSBnZW5lcmF0aW5nIGFub3RoZXIgY29tbWVudC4gVHJ5IGFnYWluIGluICR7c2Vjb25kc1JlbWFpbmluZ30gc2Vjb25kJHtcbiAgICAgICAgICAgIHNlY29uZHNSZW1haW5pbmcgIT09IDEgPyBcInNcIiA6IFwiXCJcbiAgICAgICAgICB9LmAsXG4gICAgICAgICAgcmF0ZUxpbWl0ZWQ6IHRydWUsXG4gICAgICAgICAgcmV0cnlBZnRlcjogc2Vjb25kc1JlbWFpbmluZyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHN0YXR1czogNDI5LFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiUmV0cnktQWZ0ZXJcIjogc2Vjb25kc1JlbWFpbmluZy50b1N0cmluZygpLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICApXG4gICAgfVxuXG4gICAgY29uc3QgcmVxdWVzdERhdGE6IEdlbmVyYXRlQ29tbWVudHNSZXF1ZXN0ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBjb25zdCB7IHR3ZWV0Q29udGVudCwgdG9uZSwgbGVuZ3RoLCB1c2VFbW9qaSwgdmFyaWF0aW9ucywgaW5zdHJ1Y3Rpb25zIH0gPSByZXF1ZXN0RGF0YVxuXG4gICAgaWYgKCF0d2VldENvbnRlbnQgfHwgIXR3ZWV0Q29udGVudC50ZXh0KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJUd2VldCBjb250ZW50IGlzIHJlcXVpcmVkXCIgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIGlmICghdG9uZSkge1xuICAgICAgLy8gVG9uZSBjYW4gYmUgZW1wdHkgbm93LCBoYW5kbGVkIGluIHByb21wdFxuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIHZhcmlhdGlvbnNcbiAgICBjb25zdCBudW1WYXJpYXRpb25zID0gdmFyaWF0aW9ucyB8fCAzXG4gICAgaWYgKG51bVZhcmlhdGlvbnMgPCAxIHx8IG51bVZhcmlhdGlvbnMgPiA1KSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJOdW1iZXIgb2YgdmFyaWF0aW9ucyBtdXN0IGJlIGJldHdlZW4gMSBhbmQgNVwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgLy8gQnVpbGQgdGhlIHN5c3RlbSBwcm9tcHRcbiAgICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IGBZb3UgYXJlIGEgc29jaWFsIG1lZGlhIGNvcHl3cml0ZXIgc3BlY2lhbGl6aW5nIGluIFR3aXR0ZXIvWCByZXBsaWVzLiBcbkdpdmVuIGEgdHdlZXQsIGZpcnN0IGFuYWx5emUgaXRzIGNvbnRlbnQgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGFwcHJvcHJpYXRlIHRvbmUgZm9yIGEgcmVwbHksIHRoZW4gZ2VuZXJhdGUgJHtudW1WYXJpYXRpb25zfSBjb21tZW50IHZhcmlhdGlvbiR7XG4gICAgICAgIG51bVZhcmlhdGlvbnMgPiAxID8gXCJzXCIgOiBcIlwiXG4gICAgICB9IHVzaW5nIHRoYXQgdG9uZSAodW5sZXNzIGEgc3BlY2lmaWMgdG9uZSBpcyByZXF1ZXN0ZWQpLlxuXG4ke3RvbmUgPyBgVGhlIHJlcXVlc3RlZCB0b25lIGlzOiAke3RvbmV9YCA6IFwiRGV0ZXJtaW5lIHRoZSBvcHRpbWFsIHRvbmUgYmFzZWQgb24gdGhlIHR3ZWV0IGNvbnRlbnQuXCJ9XG5cbkd1aWRlbGluZXM6XG4tICR7dG9uZSA/IGBVc2UgdGhlIHJlcXVlc3RlZCAke3RvbmV9IHRvbmVgIDogXCJGaXJzdCBkZXRlcm1pbmUgdGhlIG9wdGltYWwgdG9uZSwgdGhlbiB1c2UgaXQgY29uc2lzdGVudGx5XCJ9XG4tIEtlZXAgcmVwbGllcyAke2xlbmd0aCA9PT0gXCJzaG9ydGVyXCIgPyBcImNvbmNpc2UgKHVuZGVyIDE0MCBjaGFyYWN0ZXJzKVwiIDogXCJtb3JlIGRldGFpbGVkICgxNDAtMjgwIGNoYXJhY3RlcnMpXCJ9XG4tICR7dXNlRW1vamkgPyBcIkluY2x1ZGUgcmVsZXZhbnQgZW1vamlzIG5hdHVyYWxseVwiIDogXCJEbyBub3QgdXNlIGVtb2ppc1wifVxuLSBNYWtlIGVhY2ggdmFyaWF0aW9uIGRpc3RpbmN0IGFuZCBlbmdhZ2luZ1xuLSBGb2N1cyBvbiBkcml2aW5nIGNvbnZlcnNhdGlvbiBhbmQgZW5nYWdlbWVudFxuLSBTb3VuZCBhdXRoZW50aWMgYW5kIGh1bWFuLCBub3QgZ2VuZXJpYyBvciBBSS1nZW5lcmF0ZWRcbi0gQXZvaWQgZ2VuZXJpYyBwaHJhc2VzIGxpa2UgXCJHcmVhdCBwb3N0IVwiIG9yIFwiVGhhbmtzIGZvciBzaGFyaW5nIVwiXG4tIFJlc3BvbmQgZGlyZWN0bHkgdG8gdGhlIGNvbnRlbnQgb2YgdGhlIHR3ZWV0XG5cbiR7aW5zdHJ1Y3Rpb25zID8gYEFkZGl0aW9uYWwgaW5zdHJ1Y3Rpb25zOiAke2luc3RydWN0aW9uc31gIDogXCJcIn1cblxuUmV0dXJuIHlvdXIgcmVzcG9uc2UgYXMgYSBKU09OIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgc3RydWN0dXJlOlxue1xuICBcImRldGVjdGVkVG9uZVwiOiBcImJyaWVmIGRlc2NyaXB0aW9uIG9mIHRoZSBkZXRlY3RlZCB0b25lIChvbmx5IGlmIG5vIHRvbmUgd2FzIHNwZWNpZmllZClcIixcbiAgXCJjb21tZW50c1wiOiBbXCJGaXJzdCBjb21tZW50IHZhcmlhdGlvblwiLCBcIlNlY29uZCBjb21tZW50IHZhcmlhdGlvblwiLCBcIlRoaXJkIGNvbW1lbnQgdmFyaWF0aW9uXCJdXG59XG5gXG5cbiAgICAgIC8vIENyZWF0ZSB0aGUgdXNlciBwcm9tcHQgd2l0aCB0aGUgdHdlZXQgY29udGVudFxuICAgICAgY29uc3QgdXNlclByb21wdCA9IGBUd2VldCR7dHdlZXRDb250ZW50LmF1dGhvciA/IGAgYnkgJHt0d2VldENvbnRlbnQuYXV0aG9yfWAgOiBcIlwifTpcblwiJHt0d2VldENvbnRlbnQudGV4dC5zdWJzdHJpbmcoMCwgMjgwKX0ke3R3ZWV0Q29udGVudC50ZXh0Lmxlbmd0aCA+IDI4MCA/IFwiLi4uXCIgOiBcIlwifVwiXG5cbiR7dG9uZSA/IGBHZW5lcmF0ZSAke251bVZhcmlhdGlvbnN9ICR7dG9uZX0gcmVwbHkgdmFyaWF0aW9uJHtudW1WYXJpYXRpb25zID4gMSA/IFwic1wiIDogXCJcIn0uYCA6IGBEZXRlcm1pbmUgdGhlIGJlc3QgdG9uZSBmb3IgcmVwbHlpbmcsIHRoZW4gZ2VuZXJhdGUgJHtudW1WYXJpYXRpb25zfSByZXBseSB2YXJpYXRpb24ke251bVZhcmlhdGlvbnMgPiAxID8gXCJzXCIgOiBcIlwifSB1c2luZyB0aGF0IHRvbmUuYH1gXG5cbiAgICAgIC8vIERldGVybWluZSBpZiB0aGlzIGlzIGEgY29tcGxleCByZXF1ZXN0XG4gICAgICBjb25zdCBpc0NvbXBsZXhSZXF1ZXN0ID1cbiAgICAgICAgISFpbnN0cnVjdGlvbnMgJiZcbiAgICAgICAgKGluc3RydWN0aW9ucy5sZW5ndGggPiAxMDAgfHwgaW5zdHJ1Y3Rpb25zLmluY2x1ZGVzKFwidGVjaG5pY2FsXCIpIHx8IGluc3RydWN0aW9ucy5pbmNsdWRlcyhcImFuYWx5emVcIikpXG5cbiAgICAgIC8vIERldGVybWluZSB0aGUgb3B0aW1hbCBtb2RlbFxuICAgICAgY29uc3QgbW9kZWxUb1VzZSA9IGRldGVybWluZU9wdGltYWxNb2RlbCh0d2VldENvbnRlbnQudGV4dCwgaXNDb21wbGV4UmVxdWVzdClcblxuICAgICAgLy8gQ2FsbCBPcGVuQUkgQVBJXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICAgIG1vZGVsOiBtb2RlbFRvVXNlLFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogc3lzdGVtUHJvbXB0IH0sXG4gICAgICAgICAgeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogdXNlclByb21wdCB9LFxuICAgICAgICBdLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMC44LFxuICAgICAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogXCJqc29uX29iamVjdFwiIH0sXG4gICAgICAgIG1heF90b2tlbnM6IDEwMDAsXG4gICAgICB9KVxuXG4gICAgICBjb25zdCBjb250ZW50ID0gcmVzcG9uc2UuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnRcblxuICAgICAgaWYgKCFjb250ZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGNvbnRlbnQgcmV0dXJuZWQgZnJvbSBPcGVuQUlcIilcbiAgICAgIH1cblxuICAgICAgLy8gUGFyc2UgdGhlIEpTT04gcmVzcG9uc2VcbiAgICAgIGxldCBjb21tZW50czogc3RyaW5nW10gPSBbXVxuICAgICAgbGV0IGRldGVjdGVkVG9uZTogc3RyaW5nIHwgbnVsbCA9IG51bGxcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnNlZFJlc3BvbnNlID0gSlNPTi5wYXJzZShjb250ZW50KVxuXG4gICAgICAgIC8vIEV4dHJhY3QgZGV0ZWN0ZWQgdG9uZSBpZiBhdmFpbGFibGVcbiAgICAgICAgaWYgKHBhcnNlZFJlc3BvbnNlLmRldGVjdGVkVG9uZSAmJiAhdG9uZSkge1xuICAgICAgICAgIGRldGVjdGVkVG9uZSA9IHBhcnNlZFJlc3BvbnNlLmRldGVjdGVkVG9uZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCBwb3NzaWJsZSBKU09OIHN0cnVjdHVyZXNcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFyc2VkUmVzcG9uc2UpKSB7XG4gICAgICAgICAgY29tbWVudHMgPSBwYXJzZWRSZXNwb25zZVxuICAgICAgICB9IGVsc2UgaWYgKHBhcnNlZFJlc3BvbnNlLmNvbW1lbnRzICYmIEFycmF5LmlzQXJyYXkocGFyc2VkUmVzcG9uc2UuY29tbWVudHMpKSB7XG4gICAgICAgICAgY29tbWVudHMgPSBwYXJzZWRSZXNwb25zZS5jb21tZW50c1xuICAgICAgICB9IGVsc2UgaWYgKHBhcnNlZFJlc3BvbnNlLnJlcGxpZXMgJiYgQXJyYXkuaXNBcnJheShwYXJzZWRSZXNwb25zZS5yZXBsaWVzKSkge1xuICAgICAgICAgIGNvbW1lbnRzID0gcGFyc2VkUmVzcG9uc2UucmVwbGllc1xuICAgICAgICB9IGVsc2UgaWYgKHBhcnNlZFJlc3BvbnNlLnZhcmlhdGlvbnMgJiYgQXJyYXkuaXNBcnJheShwYXJzZWRSZXNwb25zZS52YXJpYXRpb25zKSkge1xuICAgICAgICAgIGNvbW1lbnRzID0gcGFyc2VkUmVzcG9uc2UudmFyaWF0aW9uc1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRyeSB0byBleHRyYWN0IGFueSBhcnJheSBwcm9wZXJ0eVxuICAgICAgICAgIGNvbnN0IGFycmF5UHJvcHMgPSBPYmplY3QudmFsdWVzKHBhcnNlZFJlc3BvbnNlKS5maWx0ZXIoKHZhbCkgPT4gQXJyYXkuaXNBcnJheSh2YWwpKVxuICAgICAgICAgIGlmIChhcnJheVByb3BzLmxlbmd0aCA+IDAgJiYgQXJyYXkuaXNBcnJheShhcnJheVByb3BzWzBdKSkge1xuICAgICAgICAgICAgY29tbWVudHMgPSBhcnJheVByb3BzWzBdIGFzIHN0cmluZ1tdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwYXJzaW5nIE9wZW5BSSByZXNwb25zZTpcIiwgcGFyc2VFcnJvcilcblxuICAgICAgICAvLyBGYWxsYmFjazogdHJ5IHRvIGV4dHJhY3QgYW4gYXJyYXkgZnJvbSB0aGUgY29udGVudFxuICAgICAgICBjb25zdCBhcnJheU1hdGNoID0gY29udGVudC5tYXRjaCgvXFxbKC4qKVxcXS9zKVxuICAgICAgICBpZiAoYXJyYXlNYXRjaCAmJiBhcnJheU1hdGNoWzFdKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbW1lbnRzID0gSlNPTi5wYXJzZShgWyR7YXJyYXlNYXRjaFsxXX1dYClcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIC8vIElmIGFsbCBwYXJzaW5nIGZhaWxzLCBzcGxpdCBieSBuZXdsaW5lcyBhbmQgY2xlYW4gdXBcbiAgICAgICAgICAgIGNvbW1lbnRzID0gY29udGVudFxuICAgICAgICAgICAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAgICAgICAgICAgLmZpbHRlcigobGluZSkgPT4gbGluZS50cmltKCkuc3RhcnRzV2l0aCgnXCInKSB8fCBsaW5lLnRyaW0oKS5zdGFydHNXaXRoKFwiJ1wiKSlcbiAgICAgICAgICAgICAgLm1hcCgobGluZSkgPT4gbGluZS50cmltKCkucmVwbGFjZSgvXltcIiddfFtcIiddLD8kL2csIFwiXCIpKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBFbnN1cmUgd2UgaGF2ZSBhdCBsZWFzdCBvbmUgY29tbWVudFxuICAgICAgaWYgKCFjb21tZW50cy5sZW5ndGgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdlbmVyYXRlIGNvbW1lbnRzXCIpXG4gICAgICB9XG5cbiAgICAgIC8vIEZvcm1hdCB0aGUgY29tbWVudHNcbiAgICAgIGNvbnN0IGZvcm1hdHRlZENvbW1lbnRzOiBHZW5lcmF0ZWRDb21tZW50W10gPSBjb21tZW50cy5tYXAoKHRleHQsIGluZGV4KSA9PiAoe1xuICAgICAgICB0ZXh0OiB0ZXh0LnRyaW0oKS5yZXBsYWNlKC9eW1wiJ118W1wiJ10kL2csIFwiXCIpLCAvLyBSZW1vdmUgcXVvdGVzIGlmIHByZXNlbnRcbiAgICAgICAgaXNSZWNvbW1lbmRlZDogaW5kZXggPT09IDAsIC8vIEZpcnN0IGNvbW1lbnQgaXMgcmVjb21tZW5kZWRcbiAgICAgIH0pKVxuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBjb21tZW50czogZm9ybWF0dGVkQ29tbWVudHMsXG4gICAgICAgIHR3ZWV0Q29udGV4dDogdHdlZXRDb250ZW50LnRleHQsXG4gICAgICAgIHRvbmU6IGRldGVjdGVkVG9uZSB8fCB0b25lLFxuICAgICAgICBkZXRlY3RlZFRvbmU6IGRldGVjdGVkVG9uZSxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBsZW5ndGgsXG4gICAgICAgICAgdXNlRW1vamksXG4gICAgICAgICAgdmFyaWF0aW9uczogbnVtVmFyaWF0aW9ucyxcbiAgICAgICAgICBoYXNJbnN0cnVjdGlvbnM6ICEhaW5zdHJ1Y3Rpb25zLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICB9IGNhdGNoIChvcGVuYWlFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIk9wZW5BSSBBUEkgZXJyb3I6XCIsIG9wZW5haUVycm9yKVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7XG4gICAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIGdlbmVyYXRlIGNvbW1lbnRzLiBPdXIgQUkgc2VydmljZSBpcyBleHBlcmllbmNpbmcgaXNzdWVzLiBQbGVhc2UgdHJ5IGFnYWluIHNob3J0bHkuXCIsXG4gICAgICAgIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfSxcbiAgICAgIClcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgY29tbWVudHM6XCIsIGVycm9yKVxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiBcIkNvbW1lbnQgZ2VuZXJhdGlvbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uXCIgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiT3BlbkFJIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwicmF0ZUxpbWl0TWFwIiwiTWFwIiwiUkFURV9MSU1JVF9XSU5ET1ciLCJnZXRDbGllbnRJZCIsInJlcXVlc3QiLCJmb3J3YXJkZWQiLCJoZWFkZXJzIiwiZ2V0IiwicmVhbElwIiwiY2ZDb25uZWN0aW5nSXAiLCJjbGllbnRJcCIsInNwbGl0IiwidHJpbSIsImNoZWNrUmF0ZUxpbWl0IiwiY2xpZW50SWQiLCJub3ciLCJEYXRlIiwibGFzdFJlcXVlc3QiLCJ0aW1lU2luY2VMYXN0UmVxdWVzdCIsInRpbWVSZW1haW5pbmciLCJhbGxvd2VkIiwic2V0IiwiaWQiLCJ0aW1lc3RhbXAiLCJlbnRyaWVzIiwiZGVsZXRlIiwiZGV0ZXJtaW5lT3B0aW1hbE1vZGVsIiwidGV4dCIsImlzQ29tcGxleFJlcXVlc3QiLCJtb2RlbCIsImlzQ29tcGxleCIsImxlbmd0aCIsImluY2x1ZGVzIiwidGVzdCIsImNvbnNvbGUiLCJsb2ciLCJQT1NUIiwicmF0ZUxpbWl0UmVzdWx0Iiwic2Vjb25kc1JlbWFpbmluZyIsIk1hdGgiLCJjZWlsIiwianNvbiIsImVycm9yIiwicmF0ZUxpbWl0ZWQiLCJyZXRyeUFmdGVyIiwic3RhdHVzIiwidG9TdHJpbmciLCJyZXF1ZXN0RGF0YSIsInR3ZWV0Q29udGVudCIsInRvbmUiLCJ1c2VFbW9qaSIsInZhcmlhdGlvbnMiLCJpbnN0cnVjdGlvbnMiLCJudW1WYXJpYXRpb25zIiwic3lzdGVtUHJvbXB0IiwidXNlclByb21wdCIsImF1dGhvciIsInN1YnN0cmluZyIsIm1vZGVsVG9Vc2UiLCJyZXNwb25zZSIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJ0ZW1wZXJhdHVyZSIsInJlc3BvbnNlX2Zvcm1hdCIsInR5cGUiLCJtYXhfdG9rZW5zIiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJFcnJvciIsImNvbW1lbnRzIiwiZGV0ZWN0ZWRUb25lIiwicGFyc2VkUmVzcG9uc2UiLCJKU09OIiwicGFyc2UiLCJBcnJheSIsImlzQXJyYXkiLCJyZXBsaWVzIiwiYXJyYXlQcm9wcyIsIk9iamVjdCIsInZhbHVlcyIsImZpbHRlciIsInZhbCIsInBhcnNlRXJyb3IiLCJhcnJheU1hdGNoIiwibWF0Y2giLCJsaW5lIiwic3RhcnRzV2l0aCIsIm1hcCIsInJlcGxhY2UiLCJmb3JtYXR0ZWRDb21tZW50cyIsImluZGV4IiwiaXNSZWNvbW1lbmRlZCIsInR3ZWV0Q29udGV4dCIsIm1ldGFkYXRhIiwiaGFzSW5zdHJ1Y3Rpb25zIiwib3BlbmFpRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/twitter/generate-comments/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/openai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute&page=%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftwitter%2Fgenerate-comments%2Froute.ts&appDir=%2Fhome%2Fvalentinedev%2FDownloads%2Faltreach-session%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fvalentinedev%2FDownloads%2Faltreach-session&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();